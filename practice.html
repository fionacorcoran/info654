<!DOCTYPE html>
<html lang="en">
    <head> 
        <meta charset="UTF-8">
        <title>Tree Census</title>
        <link rel="stylesheet" type="text/css" href="practice.css">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <script>
            async function fetchTreeReport () {
              const neighborhood = document.getElementById('neighborhood').value;
              const soqlQuery = `
              SELECT spc_common AS tree_type, COUNT(*) AS quantity
              WHERE nta_name = '${neighborhood}'
              GROUP BY spc_common
              ORDER BY quantity DESC
              `;
              const url = `https://data.cityofnewyork.us/api/v3/views/uvpi-gqnh/query.json?pageNumber=1&pageSize=10&app_token=EuUJxbkjULlp0gbbri4FLO9hK&query=${encodeURIComponent(soqlQuery)}`;
              const response = await fetch(url);
              const json = await response.json();
              const results = document.getElementById('results');
              results.innerHTML = "";
              (json.data || []).forEach (row => {
                const treeType = row.rowData[0] || "Unknown";
                const quantity = row.rowData[1];
                const li = document.createElement('li');
                li.textContent = `${treeType}: ${quantity}`;
                results.appendChild(li);
              });
            }
        </script>
    </head> 
    <body>
        <div>
            <h2>Neighborhood Tree Report</h2>
            <label for="neighborhood">Enter Neighborhood:</label>
            <input id="neighborhood" placeholder="e.g. Crown Heights">
            <button onclick="fetchTreeReport()">Search</button>
            <ul id="results"></ul>
        </div>
        <div class ="marquee">
            <p class ="marquee-scroll"><b>THE 2025 TREE CENSUS IS UNDERWAY!&nbsp;&nbsp;&nbsp;HAVE YOUR TREES BEEN COUNTED?</b></p>
            <p class ="marquee-scroll"><b>THE 2025 TREE CENSUS IS UNDERWAY!&nbsp;&nbsp;&nbsp;HAVE YOUR TREES BEEN COUNTED?</b></p>
        </div>
    </body> 
</html>